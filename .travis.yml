language: rust
env:
  global:
    - RUST_BACKTRACE=1
cache: cargo
# matrix:
  # allow_failures:
  #   - rust: nightly
  # fast_finish: true
rust:
  - stable
before_install:
  - sudo apt-get install python3 python3-pip -y
  - cd argonautica-py
install:
  - sudo pip3 install -r requirements-dev.txt
  - sudo python3 setup.py bdist_wheel
  - sudo pip3 install .
script:
  - cargo test --release --features="native simd serde"
  - cd argonautica-py && python3 -m unittest
sudo: true
